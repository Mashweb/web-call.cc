<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>web-call.cc</title>
    <style>
      h1 { padding: 0.2em; margin-bottom: 0.2em; border-bottom: 1px solid black; }
      div#canvas { padding: 10px; border: 1em solid white; background-color: #a5a096; }
      div#menu { padding-left: 40px; }
      div.prominent { margin:15px; min-height:20px; padding:10px; border:2px solid blue; }
      ul { margin: 0; padding: 10px 10px 5px 24px; }
      p  { margin-top: 0em; margin-bottom: 0.5em; }
      button { width: 7em; }
      button.ghosted { background-color:#a0a0a0; }
    </style>
    <script src="js/optimal-select.js"></script>
    <script>
      window.addEventListener('DOMContentLoaded', () => {
        var treeWalker;
	treeWalker = document.createTreeWalker(document.body, NodeFilter.SHOW_ELEMENT, {
	    acceptNode: function (node) {
		return NodeFilter.FILTER_ACCEPT;
	    }
	}, false);
	//console.log("TreeWalker");
	do {
	    //console.log(treeWalker.currentNode);
	    // Text selections, images, and links have an OS-dependent default rendering
	    // of them being dragged. If we want that default behavior, we should not
	    // set the "draggable" attribute of them.
            treeWalker.currentNode.draggable = "true";
	} while (treeWalker.nextNode());
      });
    </script>
  </head>
  <body>
    <h1>web-call.cc demo #1</h1>
    <div id="canvas">
      <div>
	<div id="message"></div>
	<div id="error"></div>
      </div>
      <h3>DOM editor tools:</h3>
      <div id="tools">
	<button id="add" class="ghosted">Add-insert</button>
	<button id="copy" style="background-color:lightgreen">Copy-insert</button>
	<button id="paste" class="ghosted">Paste-insert</button>
	<button id="move" style="background-color:lightgreen">Move-insert</button>
	<button id="delete" class="ghosted">Delete</button>
	<button id="undo" class="ghosted">Undo</button>
	<button id="redo" class="ghosted">Redo</button>
	<button id="save" class="ghosted">Save</button>
      </div>
      <div class="prominent">
	<p>This page demonstrates a prototype of the Zen DOM editor.
	  It will be improved as time permits.
	  The interesting aspect of it is not the tools <em>per se</em>,
	  but rather the very clear and simple programming of those tools.
	  It does not yet work in Explorer or mobile browsers.</p>
	<p>The program prompts you in green at the top of the page.
	  It will instruct you to choose a tool.
	  Currently, "Copy-insert" and "Move-insert" are the only tools that work.
	  Clicking on any other tool will produce the message
	  "Unimplemented operation."</p>
	<p>The BiwaScheme code can be
          downloaded at <a href="in-browser-gui.scm">in-browser-gui.scm</a>,
	  <a href="browser-util.scm">browser-util.scm</a>, and
	  <a href="mini-framework.scm">mini-framework.scm</a>.
	  Other experimental code can be found <a href="index2.html">here</a>.</p>
      </div>
      <div class="prominent">This is a DIV.</div>
      <div class="prominent">This is another DIV.</div>
      <div class="prominent">This is a third DIV.</div>
      <div class="prominent">This is a fourth DIV.</div>
    </div>
    <div>
    <script src="js/biwascheme-0.6.9-min.js" type="text/javascript"></script>
    <script type="text/javascript">
      var onError = function(e){ console.error(e); }
      var biwa = new BiwaScheme.Interpreter(onError);
      biwa.evaluate('(load "in-browser-gui.scm") (reset (test))'
		    , function(result) {
			console.log('BiwaScheme loaded.');
		    });
    </script>
    </div>
  </body>
</html>
