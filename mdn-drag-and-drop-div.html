<!DOCTYPE html>
<html>
  <head>
    <title>Example ondragover and drop event handlers from MDN, modified</title>
    <style>
      div, p { margin:15px; min-height:10px; padding:10px; border:2px solid blue; }
    </style>
    <script>
      var fragment;
      function dragstart_handler(ev) {
        console.log("Entering dragstart_handler");
	// Add the target element's id to the data transfer object
        console.log("dragstart_handler: ev.target.id => " + ev.target.id);
	ev.dataTransfer.setData("text/plain", ev.target.id);
      }
      function dragover_handler(ev) {
        console.log("Entering dragover_handler");
        console.group("dragover");
        console.dir(ev);
        console.groupEnd();
	ev.preventDefault();
	ev.dataTransfer.dropEffect = "move";
      }
      function drop_handler(ev) {
        console.log("Entering drop_handler");
        console.group("drop");
        console.dir(ev);
        console.groupEnd();
	ev.preventDefault();
	// Get the id of the target and add the moved element to the target's DOM
	const data = ev.dataTransfer.getData("text/plain");
        console.log("typeof data => " + typeof data);
        console.log("data.length => " + data.length);
        console.log("data => " + data);
        console.log("ev.target.id => " + ev.target.id);
	ev.target.appendChild(document.getElementById(data));
      }
      window.addEventListener('DOMContentLoaded', () => {
	// Get the element by id
	const element = document.getElementById("div");
	// Add the ondragstart event listener
	element.addEventListener("dragstart", dragstart_handler);
	//Element.prototype.ondragover = dragover_handler;
        document.body.ondragover = dragover_handler;
        document.body.ondrop = drop_handler;
      });
    </script>
  </head>
  <body>
    <h2>Example ondragover and drop event handlers from MDN, modified</h2>
This drag-and-drop example uses the same event handlers as shown in
<a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API#The_basics">
the MDN web docs section "HTML Drag and Drop API&mdash;The Basics"</a>,
except that the handlers are attached to the document body.
It shows how to:
    <ol>
      <li>
	define a draggable element by putting a <em>draggable</em> attribute in the element's HTML
        tag and attaching a <em>dragstart</em> handler to it;
      </li>
      <li>
	define a drag data item, which the example uses to identify the dragged element;
      </li>
      <li>
	define the drag effect as a <em>move</em> operation; and
      </li>
      <li>
	define a drop zone the whole web page by attaching an <em>ondrop</em> handler and
        an <em>ondragover</em> handler to the <em>document body</em>.
      </li>
    </ol>
    Some extra elements have been added to experiment with the <em>ondragstart</em> and
    <em>ondragover</em> properties.
    <div id="div" draggable="true">This DIV element has a <em>draggable</em> attrubte.</div>
    <p id="p1" draggable="true">This P element has a <em>draggable</em> attribute, but
      is not connected to a <em>dragstart</em> event handler.</p>
    <p ondrop="drop_handler(event)" ondragover="dragover_handler(event)">
      Drop Zone (with attached <em>ondrop</em> and <em>ondragover</em> handlers)</p>
    <p ondrop="drop_handler(event)" ondragover="dragover_handler(event)">
      Drop Zone (with an attached <em>ondrop</em> handler but no <em>ondragover</em> handler)</p>
    <div>
      DIV 0, DIV 1, and DIV 2 are draggable, but since their <em>ondragstart</em> property is
      not set they cannot be dragged.
      <div id="div0" draggable="true">DIV 0</div>
      <div id="div1" draggable="true">DIV 1</div>
      <div id="div2" draggable="true">DIV 2</div>
    </div>
  </body>
</html>
